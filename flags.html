<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Βρες τους γείτονες</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="countries.js"></script>
    <script>
        const allCountries = new Array();
        // πχ. allCountries['GRE'] = { code2: "GR", name: "Greece"}, ή κάτι παρόμοιο 

        // moves the progress bar towards the specified step
        function changeProgressBar(step) {
            var elem = document.getElementById("progress-bar");
            var progressbar = setInterval(frame, step);
            function frame() {
                if (step >= 100) 
                    clearInterval(progressbar);
                else  
                    elem.style.width = step + "%"; 
            }
        }

        function on() {
            document.getElementById("overlay").style.display = "block";
        }

        function off() {
            document.getElementById("overlay").style.display = "none";
        }

        function changePlayerRound(round) {
            document.getElementById("player_round").innerHTML = round;
        }

        function changePlayerScore(score) {
            document.getElementById("player_score").innerHTML = score;
        }

        document.addEventListener("DOMContentLoaded", () => {
            document.querySelector("#btn-new-game").addEventListener("click", () => {
                // ...
                var i=0;
                for (i = 0; i < 11; i++) {
                    if (i < 3) {
                        var countryCode = "grc";
                        var countryName = "Greece";
                    } else if (i < 6) {
                        var countryCode = "swe";
                        var countryName = "Sweden";  
                    }
                    else if (i < 9) {
                        var countryCode = "bra";
                        var countryName = "Brazil";  
                    }
                    else {
                        var countryCode = "ita";
                        var countryName = "Italy";  
                    }
                    var countryDiv = document.createElement('div');
                    var countryDivHref = document.createElement('a');
                    var countryDivImage = document.createElement('img');
                    var countryDivName = document.createElement('p');
                    var element = document.getElementById("countries_list");
                    countryDiv.setAttribute("id", "id_" + countryCode);
                    countryDiv.setAttribute("class", "flex-country");
                    if (i%2 === 0)
                        countryDiv.setAttribute("style", "border: 5px solid red; background-color: #e8e8e8");       // if country wrong
                    else
                        countryDiv.setAttribute("style", "border: 5px solid green; background-color: #e8e8e8");     // if country correct
                    countryDivHref.setAttribute('href', "#");
                    countryDivHref.setAttribute('onclick', "changeProgressBar(10)");
                    countryDivImage.src = 'https://restcountries.eu/data/' + countryCode + '.svg';
                    countryDivName.innerHTML = countryName;
                    countryDivName.setAttribute("style","text-align: center");
                    countryDivHref.appendChild(countryDivImage);
                    countryDiv.appendChild(countryDivHref);
                    countryDiv.appendChild(countryDivImage);
                    countryDiv.appendChild(countryDivName);
                    element.appendChild(countryDiv);
                }
            });

            $(window).resize(function () {
                    var elmnt = document.getElementById("countries_list");
                    let centerX = elmnt.offsetLeft + elmnt.offsetWidth/2;
                    let centerY = elmnt.offsetTop + elmnt.offsetHeight/2;
                    document.getElementById("custom_overlay").style.display = "block";
                    document.getElementById("custom_overlay").style.left = centerX-100 + "px";
                    document.getElementById("custom_overlay").style.top = centerY-50 + "px";
            });

            document.querySelector("#btn-next-round").addEventListener("click", () => {
            })

        });
    </script>
</head>

<body>
    <div class="game-panel">
        <div class="row-inline">
            <div class="sidenav">
                <p><strong>Βρες τους γείτονες</strong></p><br>
                <div style="overflow: hidden;">
                    <p style="float: left;">Γύρος: </p>
                    <p id="player_round" style="float: right;">0</p>
                </div>
                <div style="overflow: hidden;">
                    <p style="float: left;">Σκορ: </p>
                    <p id="player_score" style="float: right;">0</p>
                </div>
                <div class="text-center">
                    <button id="btn-next-round" class="btn btn-light btn-block" disabled>Επόμενη Χώρα</button>
                    <button id="btn-new-game" class="btn btn-light btn-block">Νέο Παιχνίδι</button>
                </div>
            </div>

            <div class="main">
                <h2><img id="header_img" src="https://restcountries.eu/data/grc.svg">Greece</h2>
                <div class="progress">
                    <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <div class="box">
                    <ul class="flex-container wrap" id="countries_list">
                        <div id="custom_overlay">MY OVERLAY</div>
                        <div id="id_grc" class="flex-country" style="border: 5px solid red; background-color: #e8e8e8"><a href="#" onclick="changeProgressBar(10)"></a><img src="https://restcountries.eu/data/grc.svg"><p style="text-align: center">Greece</p></div>
                        <div id="id_grc" class="flex-country" style="border: 5px solid red; background-color: #e8e8e8"><a href="#" onclick="changeProgressBar(10)"></a><img src="https://restcountries.eu/data/grc.svg"><p style="text-align: center">Greece</p></div>
                        <div id="id_grc" class="flex-country" style="border: 5px solid red; background-color: #e8e8e8"><a href="#" onclick="changeProgressBar(10)"></a><img src="https://restcountries.eu/data/grc.svg"><p style="text-align: center">Greece</p></div>
                        <div id="id_grc" class="flex-country" style="border: 5px solid red; background-color: #e8e8e8"><a href="#" onclick="changeProgressBar(10)"></a><img src="https://restcountries.eu/data/grc.svg"><p style="text-align: center">Greece</p></div>
                        <div id="id_grc" class="flex-country" style="border: 5px solid red; background-color: #e8e8e8"><a href="#" onclick="changeProgressBar(10)"></a><img src="https://restcountries.eu/data/grc.svg"><p style="text-align: center">Greece</p></div>
                        <div id="id_grc" class="flex-country" style="border: 5px solid red; background-color: #e8e8e8"><a href="#" onclick="changeProgressBar(10)"></a><img src="https://restcountries.eu/data/grc.svg"><p style="text-align: center">Greece</p></div>
                        <div id="id_grc" class="flex-country" style="border: 5px solid red; background-color: #e8e8e8"><a href="#" onclick="changeProgressBar(10)"></a><img src="https://restcountries.eu/data/grc.svg"><p style="text-align: center">Greece</p></div>
                    </ul>
                </div>
            </div>
        </div> 
    </div>
</body>

<script>
//Το παρακάτω αφορά μόνο τους χρήστες macOS.
if (navigator.appVersion.indexOf("Macintosh")>0){
  document.body.style.fontFamily = '"Open Sans"';
}
</script>

</html>